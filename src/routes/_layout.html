<svelte:component
  this={child.component}
  {...child.props}
  siteTitle={Dictionary.siteTitle}
/>

<Main projectsActive={child.segment === "projects"}/>

<Home
  show={child.props.path === routeNames.home}
  data={info}
/>

<About
  show={child.props.path === routeNames.about}
  info={info}
  page={about}
/>

<Projects
  show={child.props.path === routeNames.projects}
  info={info}
/>

<script>
  import "../styles/global.scss"

  import routeNames from "../utils/routeNames"
  import {apiUrl} from "../utils/settings";
  import {Dictionary} from "../utils/Dictionary";

  export default {
	  helpers: {
	    routeNames,
      Dictionary,
	  },

		components: {
			Main: "../components/Main/Main.html",
			Home: "../components/Home/Home.html",
			About: "../components/About/About.html",
			Projects: "../components/Projects/Projects.html",
		},

		oncreate() {
	    const request = new XMLHttpRequest();
	    request.open("get", `${apiUrl}/info/main`, true);

	    request.onreadystatechange = () => {
	      if (request.readyState !== XMLHttpRequest.DONE || request.status !== 200) {
	        return;
	      }

	      if (request.responseText) {
	        const {info, about} = JSON.parse(request.responseText);
          this.set({
            info,
            about,
          });
	      }
	    };

	    request.send();
		},

		data: () => ({
      info: {
        main: Dictionary.info.main,
        specialty: Dictionary.info.specialty,
        title: "",
      },
      about: {
        title: "",
        text: "",
      },
    }),
	};
</script>
